
<!-- Jinja2 for resusability-->
{% extends "Base.html" %}
{% block title %}Transferfunds{% endblock %}
<!-- main content change this per page-->
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='global.css') }}">

<script>
const accountData = {
    "Everyday Account": 3095.41,
    "Savings Account": 8200.45,
    "Holiday Fund": 1250.00,
    "Investments": 23000.87,
    "Emergency Account": 600.00
};
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const fromAccountSelect = document.getElementById('fromAccount');
    const balanceInput = document.getElementById('availableBalance');

    fromAccountSelect.addEventListener('change', () => {
        const selected = fromAccountSelect.value;

        if (accountData[selected] !== undefined) {
            balanceInput.value = "$" + accountData[selected].toLocaleString();
        } else {
            balanceInput.value = "";
        }
    });
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const fromAccountSelect = document.getElementById('fromAccount');
    const toAccountSelect = document.getElementById('toAccount');
    const balanceInput = document.getElementById('availableBalance');
    const transferAmountInput = document.getElementById('transferAmount');
    const confirmBtn = document.querySelector('.confirm-btn');

    // Update balance when switching FROM account
    fromAccountSelect.addEventListener('change', () => {
        const selected = fromAccountSelect.value;
        balanceInput.value = accountData[selected] !== undefined 
            ? "$" + accountData[selected].toLocaleString()
            : "";
    });

    // Confirm transfer logic
    confirmBtn.addEventListener("click", () => {
        const fromAccount = fromAccountSelect.value;
        const toAccount = toAccountSelect.value;
        const amount = parseFloat(transferAmountInput.value);

        if (!fromAccount || !toAccount || isNaN(amount) || amount <= 0) {
            alert("Please enter a valid transfer.");
            return;
        }

        if (fromAccount === toAccount) {
            alert("You cannot transfer to the same account.");
            return;
        }

        if (accountData[fromAccount] < amount) {
            alert("Insufficient funds.");
            return;
        }

        // Apply transfer
        accountData[fromAccount] -= amount;
        accountData[toAccount] += amount;

        // Update displayed balance
        balanceInput.value = "$" + accountData[fromAccount].toLocaleString();

        alert(`Transfer successful!\n\n$${amount.toLocaleString()} moved from ${fromAccount} to ${toAccount}.`);
    });

});
</script>

<div class="transfer-container">

    <h1 class="transfer-title">Transfer Funds</h1>

    <div class="transfer-grid">

        <!-- LEFT COLUMN -->
        <div class="transfer-column">
            <h2>From Account</h2>
            
            <label>Select Account</label>
            <select id="fromAccount">
                <option disabled selected>Select an account</option>
                <option>Everyday Account</option>
                <option>Savings Account</option>
                <option>Holiday Fund</option>
                <option>Investments</option>
                <option>Emergency Account</option>
            </select>

            <label>Available Balance</label>
            <input id="availableBalance" type="text" value="" disabled>
        </div>

        <!-- ARROW -->
        <div class="transfer-arrow">
            âžœ
        </div>

        <!-- RIGHT COLUMN -->
         <div class="transfer-column">
            <h2>To Account</h2>
            
            <label>Select Account</label>
            <select id="toAccount">
                <option>Everyday Account</option>
                <option>Savings Account</option>
                <option>Holiday Fund</option>
                <option>Investments</option>
                <option>Emergency Account</option>
            </select>
            
            <label>Transfer Amount</label>
            <input id="transferAmount" type="number" placeholder="Enter amount">
        </div>

    </div>

    <div class="transfer-actions">
        <button class="confirm-btn">Confirm Transfer</button>
        <a href="{{ url_for('my_accounts') }}" class="cancel-btn">Cancel</a>
    </div>

</div>

{% endblock %}