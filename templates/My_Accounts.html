
<!-- Jinja2 for resusability-->
{% extends "Base.html" %}
{% block title %}My_Accounts{% endblock %}
<!-- main content change this per page-->

{% block content %}
<section class="accounts-container">
    <h1 class="acc-title">My Accounts</h1>

    <div class="accounts-grid">
        {% for acc in accounts %}
        <div class="account-card">

            <!-- Dynamic image per account -->
            <div class="account-image" 
            style="background-image: url('{{ url_for('static', filename='images/' ~ (acc.image or 'Pantera.jpg')) }}');"></div>

            <div class="account-info">
                <div class="account-name">{{ acc.name }}</div>
                <div class="account-balance">
                    ${{ '%.2f'|format(acc.balance) }}
                </div>

                <a class="acc-dropdown-btn" 
                   href="{{ url_for('transfer_bp.transfer_funds_page', account_id=acc.id) }}">
                    Transfer Funds
                </a>
            </div>

        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// Ensure images display properly
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll('.account-image').forEach(div => {
        // Only set styles if not already set via inline
        if (!div.style.backgroundImage) {
            const img = div.dataset.image;
            if (img) {
                div.style.backgroundImage = `url('${img}')`;
            }
        }
        div.style.backgroundSize = "cover";
        div.style.backgroundPosition = "center";
        div.style.backgroundRepeat = "no-repeat";
    });
});
</script>
{% endblock %}
